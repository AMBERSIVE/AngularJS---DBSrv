!function(a,b,c){"use strict";angular.module("ambersive.db",[]),angular.module("ambersive.db").factory("authenticationInjector",["$injector","$q","$log","$dbSettings","$timeout",function(a,b,c,d,e){var f={request:function(a){var d=b.defer();return c.log(a),e(function(){d.resolve(a)},100),d.promise}};return f}]),angular.module("ambersive.db").config(["$httpProvider",function(a){a.interceptors.push("authenticationInjector")}]),angular.module("ambersive.db").provider("$dbSettings",[function(){var a="",b="application/json; charset=utf-8;",c={},d=function(a,b){return c[a]=b,c},e=function(a){return c[a]},f=function(b){a=b},g=function(a){b=a};return{register:d,setBaseUrl:f,setContentType:g,$get:function(){return{baseUrl:a,contentType:b,routes:c,route:e}}}}]),angular.module("ambersive.db").factory("DB",["$q","$log","$http","$dbSettings",function(a,b,d,e){var f={},g=function(a,b){var d={method:a.toUpperCase()},f=e.baseUrl,g="/",h="";switch(b!==c&&b.baseUrl!==c&&(f=b.baseUrl),b!==c&&b.url!==c&&(h=b.url),f!==c&&f.length>0&&f.slice(-1)===g?g="":f="/",a){default:d.url=f+g+h}return d.headers={},d.headers["Content-Type"]=e.contentType,b.contentType!==c&&(d.headers["Content-Type"]=b.contentType),d},h=function(b){return{get:function(){var c=a.defer(),e=g("get",b);return d(e).success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},getById:function(c){var e=a.defer(),f=g("get",b);return f.url+="/"+c,d(f).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise},update:function(c,e){var f=a.defer(),h=g("put",b);return h.url+="/"+c,d(h).success(function(a,b,c,d){f.resolve(a)}).error(function(a,b,c,d){f.reject(a)}),f.promise},create:function(c){var e=a.defer(),f=g("post",b);return f.data=c,d(f).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise},"delete":function(c){var e=a.defer(),f=g("delete",b);return f.url+="/"+c,d(f).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise}}},i=function(){var a=null,d=null;if(arguments.length>0){if(angular.isObject(arguments[0])&&arguments[0].name!==c&&(d=arguments[0].name),angular.isString(arguments[0])&&(d=arguments[0]),f[d]===c){f[d]=new h(e.route(d));var g=[],i=e.route(d);i!==c&&i.except!==c&&(g=i.except),g.length>0&&g.forEach(function(a,b){f[d][a]!==c&&delete f[d][a]})}angular.isObject(arguments[0])&&arguments[0].name!==c&&(f[d][arguments[0].fnName]=arguments[0].fn),a=f[d]}else b.warn("Please define a Service");return a};return i}])}(window,document,void 0);